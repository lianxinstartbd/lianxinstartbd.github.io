---
title: 04推送和抓取分支
date: 2018-05-17 08:36:41
tags:
- git      
- 推送和抓取分支
category: git
---
# 1.多人协作
查看远程库的信息：git  remote，执行结果是：origin。远程仓库的默认名称是origin。  
查看远程库更多信息：git  remote  -v，显示了可以抓取和推送的origin的地址。如果没有推送权限，就看不到push的地址。  
![](/images/git/git-04-01.png)  
# 2.推送分支
就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：  
git push  origin  branch-name（name不一定是master）  
例如：git  push  origin master；  git  push  origin  dev  
但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？  
1. master分支是主分支，因此要时刻与远程同步；
2. dev分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；
3. bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；
4. feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。  
总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！  
# 3.抓取分支
1. 多人合作开发时，使用命令git  clone  git地址，结果一般是默认只能看到master，分支看不到。
2. 你的小伙伴要在dev分支上开发，就必须创建远程origin的dev分支到本地，于是他用这个命令创建本地dev分支：  
  git checkout  -b  dev origin/dev： 指定当前创建的dev分支，是和远程的dev链接起来。
3. 之后就能git push origin  dev。  
如果遇到有同学同时修改了相同的文件，也会出现冲突，则需要先git pull，把最新的提交从origin/dev抓下来，然后，在本地合并，解决冲突，再推送。  
![](/images/git/git-04-02.png)  
4. 如果git pull都失败了，并且提示如下，原因是没有指定本地dev分支与远程origin/dev分支的链接，  
![](/images/git/git-04-03.png)  
根据提示，设置dev和origin/dev的链接：git branch --set-upstream dev origin/dev  
# 4.多人协作过程  
因此，多人协作的工作模式通常是这样：
1. 首先，可以试图用git push origin branch-name推送自己的修改；
2. 如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；
3. 如果合并有冲突，则解决冲突，并在本地提交（git  add 并且git  commit）；
4. 没有冲突或者解决掉冲突后，再用git push origin branch-name推送就能成功！  
如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name。  
这就是多人协作的工作模式，一旦熟悉了，就非常简单。  
# 5.小结
1. 查看远程库信息，使用git remote -v；
2. 本地新建的分支如果不推送到远程，对其他人就是不可见的；
3. 从本地推送分支，使用git push origin branch-name，如果推送失败，先用git pull抓取远程的新提交；
4. 在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；
5. 建立本地分支和远程分支的关联，使用git branch --set-upstream branch-name origin/branch-name；
6. 从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。






